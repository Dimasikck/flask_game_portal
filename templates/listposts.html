{% extends 'base.html' %}

{% block content %}
<section class="posts-list-hero-section">
    <div class="posts-list-hero-block neon-block">
        <h1 class="neon-title" style="text-align:center;">{{title}}</h1>
        {% for cat, msg in get_flashed_messages(True) %}
        <div class="flash {{cat}}">{{msg}}</div>
        {% endfor %}
        <form method="get" action="{{ url_for('listposts') }}">
            <div class="search-controls">
                <div class="search-container">
                    <input type="text" name="search" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É..." value="{{ request.args.get('search', '') }}">
                    <button type="submit" id="search-btn">üîç</button>
                </div>
                <div class="sort-container">
                    <label for="sort-select">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:</label>
                    <select id="sort-select" name="sort_name">
                        <option value="title_asc" {% if sort == 'title_asc' %}selected{% endif %}>–ó–∞–≥–æ–ª–æ–≤–æ–∫ (–ê-–Ø)</option>
                        <option value="title_desc" {% if sort == 'title_desc' %}selected{% endif %}>–ó–∞–≥–æ–ª–æ–≤–æ–∫ (–Ø-–ê)</option>
                        <option value="time_asc" {% if sort == 'time_asc' %}selected{% endif %}>–î–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                        <option value="time_desc" {% if sort == 'time_desc' %}selected{% endif %}>–î–∞—Ç–∞ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                    </select>
                </div>
                <button type="submit" id="apply-filters-btn" class="neon-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
        </form>
    </div>
</section>

<section class="posts-list-section">
    <div class="cards-container">
        {% for post in posts %}
        <a href="{{ url_for('showPost', post_id=post.id) }}" class="post-card">
            {% if post.cover %}
            <div class="post-cover">
                <img src="data:image/jpeg;base64,{{ post.cover|b64encode }}" alt="{{ post.title }}">
            </div>
            {% endif %}
            <div class="post-title">{{ post.title }}</div>
        </a>
        {% endfor %}
    </div>
</section>

<script src="{{ url_for('static', filename='js/favorites.js') }}"></script>
{% endblock %}