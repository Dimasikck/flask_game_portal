{% extends 'base.html' %}

{% block content %}
{{ super() }}

{% for cat, msg in get_flashed_messages(True) %}
<div class="flash {{cat}}">{{msg}}</div>
{% endfor %}

<div class="profile-container">
    <h1>{{game.title}}</h1>
</div>

<div class="game-layout">
    <div class="game-frame-container">
        {% if game.game_type == 'link' %}
            <iframe src="{{ game.link }}" id="game-frame" allowtransparency="true" class="game-frame" allow="fullscreen"></iframe>
        {% elif game.game_type == 'pygame' %}
            <iframe src="{{ url_for('pygame') }}" id="game-frame" allowtransparency="true" class="game-frame"allow="fullscreen"></iframe>
        {% elif game.game_type == 'unity' %}
            <iframe src="{{ url_for('unity') }}" id="game-frame" allowtransparency="true" class="game-frame"allow="fullscreen"></iframe>
        {% endif %}
        <div class="game-controls">
            {% if game.genre %}
                <p class="game-genre"><strong>–ñ–∞–Ω—Ä:</strong> {{ game.genre }}</p>
            {% endif %}
            <div class="button-group">
                <a id="fullscreen-btn" class="btn fullscreen-btn">üì∫–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω </a>
                {% if game.installer %}
                    <a href="{{ url_for('download_installer', game_id=game.id) }}" class="btn download-btn">üíæ–°–∫–∞—á–∞—Ç—å </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="game-info-container">
    <div id="game-info" class="game-info">
        <h2 style="text-align: center">–û –∏–≥—Ä–µ</h2>
        <hr>
        <p>{{ game.description | safe }}</p>
    </div>
</div>

<!-- –ë–ª–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
<div id="comments-section">
    <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
    <form id="comment-form">
        <textarea id="comment-text" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." required></textarea>
        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
    <div id="comments-container"></div>
</div>

<script src="{{url_for('static', filename='js/fullscreen.js')}}" rel="javascript"></script>
<script src="{{url_for('static', filename='js/coments.js')}}" rel="javascript"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.cookie = "game_path={{ game.link }}; path=/; SameSite=Lax";
        // –£–±—Ä–∞–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞
        console.log("game-layout:", document.querySelector('.game-layout'));
    });
</script>

{% endblock %}