{% extends 'admin/base_admin.html' %}

{% block content %}
<h1>{{ title }}</h1>
<div class="search-controls">
    <input type="text" id="search" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —Ç–µ–∫—Å—Ç—É..." value="{{ search }}">
    <select id="sort" name="sort">
        <option value="time_desc" {% if sort == 'time_desc' %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ (—É–±—ã–≤–∞–Ω–∏–µ)</option>
        <option value="time_asc" {% if sort == 'time_asc' %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)</option>
        <option value="title_asc" {% if sort == 'title_asc' %}selected{% endif %}>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (A-Z)</option>
        <option value="title_desc" {% if sort == 'title_desc' %}selected{% endif %}>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (Z-A)</option>
    </select>
    <button id="apply-filters-btn" class="btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
</div>
<ul class="list-posts">
    {% for post in posts %}
    <li>
        <div class="title">{{ post.title }}</div>
        <div class="annonce">{{ post.text[:100] }}...</div>
        <a href="{{ url_for('admin.edit_post', post_id=post.id) }}" class="edit-link">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a href="{{ url_for('admin.delete_post', post_id=post.id) }}" class="edit-link" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
    </li>
    {% endfor %}
</ul>
<a href="{{ url_for('admin.add_post') }}" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç</a>
<script>
    document.getElementById('apply-filters-btn').addEventListener('click', function() {
        const search = document.getElementById('search').value;
        const sort = document.getElementById('sort').value;
        const url = new URL(window.location.href);
        url.searchParams.set('search', search);
        url.searchParams.set('sort', sort);
        window.location.href = url.toString();
    });
</script>
{% endblock %}